 Aura_Orchestra â€” BATCH 1
Repo Skeleton Â· Postgres Schema Â· .env Â· README
Status: Productionâ€‘grade foundation
Scope: Architecture, governance, persistence, zero business logic

1ï¸âƒ£ Repository Skeleton (Authoritative)
aura_orchestra/
â”œâ”€ README.md
â”œâ”€ .env.example
â”œâ”€ .gitignore
â”œâ”€ docker-compose.yml
â”‚
â”œâ”€ docs/
â”‚  â”œâ”€ prd/
â”‚  â”‚  â””â”€ PRD.md
â”‚  â”œâ”€ policy/
â”‚  â”‚  â””â”€ CODE_OF_CONDUCT.md
â”‚  â””â”€ architecture/
â”‚     â””â”€ SYSTEM_OVERVIEW.md
â”‚
â”œâ”€ ui/
â”‚  â””â”€ director_dashboard/
â”‚     â”œâ”€ overview.json
â”‚     â”œâ”€ monitoring.json
â”‚     â””â”€ intervention.json
â”‚
â”œâ”€ services/
â”‚  â”œâ”€ manager/
â”‚  â”‚  â”œâ”€ Dockerfile
â”‚  â”‚  â”œâ”€ app/
â”‚  â”‚  â”‚  â”œâ”€ main.py
â”‚  â”‚  â”‚  â”œâ”€ orchestration.py
â”‚  â”‚  â”‚  â”œâ”€ routing.py
â”‚  â”‚  â”‚  â””â”€ policy_enforcer.py
â”‚  â”‚  â””â”€ requirements.txt
â”‚  â”‚
â”‚  â”œâ”€ agent_runtime/
â”‚  â”‚  â”œâ”€ Dockerfile
â”‚  â”‚  â”œâ”€ app/
â”‚  â”‚  â”‚  â”œâ”€ agent.py
â”‚  â”‚  â”‚  â”œâ”€ scoring.py
â”‚  â”‚  â”‚  â””â”€ execution.py
â”‚  â”‚  â””â”€ requirements.txt
â”‚  â”‚
â”‚  â”œâ”€ auditor/
â”‚  â”‚  â”œâ”€ Dockerfile
â”‚  â”‚  â”œâ”€ app/
â”‚  â”‚  â”‚  â”œâ”€ auditor.py
â”‚  â”‚  â”‚  â””â”€ validators.py
â”‚  â”‚  â””â”€ requirements.txt
â”‚
â”œâ”€ database/
â”‚  â”œâ”€ migrations/
â”‚  â”‚  â””â”€ 001_init_schema.sql
â”‚  â””â”€ seeds/
â”‚     â””â”€ bootstrap.sql
â”‚
â”œâ”€ shared/
â”‚  â”œâ”€ models.py
â”‚  â”œâ”€ enums.py
â”‚  â””â”€ schemas.py
â”‚
â””â”€ scripts/
   â”œâ”€ init_db.sh
   â””â”€ dev_bootstrap.sh
âœ… Why this structure is correct

Clear separation of authority (Director â†’ Manager â†’ Agent â†’ Auditor â†’ HR later)

DB owns truth

UI owns visibility

Services own behavior

No agent can act without Manager mediation

2ï¸âƒ£ .env.example (Strict + Minimal)
# ======================
# CORE
# ======================
ENV=development
PROJECT_NAME=Aura_Orchestra

# ======================
# DATABASE
# ======================
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=aura_orchestra
POSTGRES_USER=aura_admin
POSTGRES_PASSWORD=change_me

# ======================
# MANAGER SERVICE
# ======================
MANAGER_PORT=8000
MANAGER_API_KEY=local-dev-only

# ======================
# MODEL PROVIDERS
# ======================
OLLAMA_BASE_URL=http://host.docker.internal:11434
OPENAI_API_KEY=
GEMINI_API_KEY=

# ======================
# SECURITY
# ======================
AUDIT_LOG_RETENTION_DAYS=365
ENABLE_STRICT_POLICY=true
âœ… No secrets committed
âœ… Supports Windows + Linux
âœ… Matches selfâ€‘hosting reality

3ï¸âƒ£ Docker Compose (Minimal, Expandable)
version: "3.9"

services:
  postgres:
    image: postgres:15
    container_name: aura_postgres
    restart: unless-stopped
    env_file: .env
    volumes:
      - pgdata:/var/lib/postgresql/data
    ports:
      - "5432:5432"

  manager:
    build: ./services/manager
    container_name: aura_manager
    env_file: .env
    depends_on:
      - postgres
    ports:
      - "8000:8000"
    restart: unless-stopped

  auditor:
    build: ./services/auditor
    container_name: aura_auditor
    env_file: .env
    depends_on:
      - postgres
    restart: unless-stopped

volumes:
  pgdata:
âœ… Selfâ€‘healing
âœ… No single container failure kills system
âœ… Agent containers scale later

4ï¸âƒ£ Database Schema (FOUNDATIONAL)
database/migrations/001_init_schema.sql

CREATE TABLE projects (
  id UUID PRIMARY KEY,
  name TEXT NOT NULL,
  created_at TIMESTAMP NOT NULL DEFAULT now()
);

CREATE TABLE orchestra_runs (
  id UUID PRIMARY KEY,
  project_id UUID REFERENCES projects(id),
  manager_id TEXT NOT NULL,
  status TEXT NOT NULL,
  confidence_score NUMERIC,
  started_at TIMESTAMP DEFAULT now(),
  finished_at TIMESTAMP
);

CREATE TABLE task_queue (
  id UUID PRIMARY KEY,
  run_id UUID REFERENCES orchestra_runs(id),
  assigned_agent TEXT,
  status TEXT NOT NULL,
  priority INT DEFAULT 0,
  created_at TIMESTAMP DEFAULT now(),
  completed_at TIMESTAMP
);

CREATE TABLE agent_activity_logs (
  id UUID PRIMARY KEY,
  agent_id TEXT NOT NULL,
  task_id UUID,
  message TEXT,
  severity TEXT,
  created_at TIMESTAMP DEFAULT now()
);

CREATE TABLE audit_events (
  id UUID PRIMARY KEY,
  source TEXT,
  severity TEXT,
  description TEXT,
  created_at TIMESTAMP DEFAULT now()
);

CREATE TABLE director_actions (
  id UUID PRIMARY KEY,
  director_id TEXT,
  action TEXT,
  target_id UUID,
  reason TEXT,
  created_at TIMESTAMP DEFAULT now()
);
âœ… Maps 1:1 to dashboard panels
âœ… Immutable audit trail
âœ… No hidden actions

5ï¸âƒ£ Bootstrap Script
scripts/init_db.sh

#!/bin/bash
set -e

echo "Initializing Aura_Orchestra database..."
psql -h $POSTGRES_HOST -U $POSTGRES_USER -d $POSTGRES_DB \
  -f database/migrations/001_init_schema.sql
6ï¸âƒ£ .gitignore
.env
__pycache__/
*.pyc
pgdata/
.idea/
.vscode/
7ï¸âƒ£ README.md (Authoritative)
# Aura_Orchestra

Aura_Orchestra is a **governed, auditable, productionâ€‘grade AI orchestration system**
designed to transform product requirements into verified, testable, productionâ€‘ready software.

## Core Principles
- Director has absolute visibility
- Manager controls all execution
- Agents cannot selfâ€‘assign work
- Every action is logged
- Every failure is measurable
- No silent overrides

## Architecture
Director â†’ Manager â†’ Agents  
Auditor & HR enforce correctness and policy

## Getting Started
1. Copy `.env.example` â†’ `.env`
2. `docker compose up --build`
3. Verify Manager API on `localhost:8000`

## Status
ğŸš§ Active development â€” governance locked before implementation.
âœ… WHAT BATCH 1 ACHIEVES
âœ” You can boot the system
âœ” Database schema exists and is correct
âœ” Governance boundaries are enforced structurally
âœ” Future work cannot violate hierarchy without changing schema
âœ” This scales from local â†’ enterprise

ğŸ”’ IMMUTABILITY RULE (IMPORTANT)
From this point on:

Tables may be extended

Never removed

Never repurposed

Only appendâ€‘only audit logic

This preserves legalâ€‘grade traceability.